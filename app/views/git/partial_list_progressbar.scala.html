@**
* Yobi, Project Hosting SW
*
* Copyright 2015 NAVER Corp.
* http://yobi.io
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
**@
@(pull: PullRequest)

@import utils.JodaDateUtil
@import utils.TemplateHelper._
@import org.apache.commons.lang3.StringUtils

                @if(!pull.commentThreads.isEmpty){
                    @defining(pull.countCommentThreadsByState(CommentThread.ThreadState.CLOSED)){ countClosed =>

                    <div class="infos-item margin-right-10 pull-left" data-toggle="tooltip" title="@Messages("pullRequest.review.closed") / @Messages("pullRequest.review.total")">
                        <i class="yobicon-post2 vmiddle"></i>
                        <div class="upload-progress">
                        @if(countClosed == pull.commentThreads.size){
                            <div class="bar green" style="width: 100%;"> </div>
                        } else {
                            <div class="bar orange" style="width: @getPercent(countClosed.toDouble, pull.commentThreads.size.toDouble)%;"> </div>
                        }
                        </div>
                        <a href="@routes.PullRequestApp.pullRequestChanges(pull.toProject.owner, pull.toProject.name, pull.number)">
                        @if(countClosed == pull.commentThreads.size){
                            @countClosed
                        } else {
                                <span>@countClosed</span>
                                <span class="gray-txt">/</span>
                            <span class="size total">@pull.commentThreads.size</span>
                        }
                        </a>
                    </div>
                    }
                }
